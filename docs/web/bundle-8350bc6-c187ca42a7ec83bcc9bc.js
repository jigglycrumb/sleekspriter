(()=>{"use strict";function r(r,a){return r[a.x]&&r[a.x][a.y]||!1}function a(r){return r.x+":"+r.y}function t(r,a,t){return Math.abs(r-a)<=2.55*t}self.onmessage=function(n){var e={},o=n.data,u=o.point,x=o.pixels,s=o.fillColor,y=o.layer,f=o.frame,i=o.bounds,c=o.tolerance,g=r(x,u);g||(g={frame:f,layer:y,x:u.x,y:u.y,r:0,g:0,b:0,a:0});for(var b={r:g.r,g:g.g,b:g.b,a:g.a},l={},h=[g],p=function(){var n=[],o={};h.forEach((function(u){l[a(u)]=!0;var g,h=r(x,u);(function(r,a,n){return t(r.r,a.r,n)&&t(r.g,a.g,n)&&t(r.b,a.b,n)&&r.a===a.a})(h?{r:h.r,g:h.g,b:h.b,a:h.a}:{r:0,g:0,b:0,a:0},b,c)&&(e[u.x]||(e[u.x]={}),e[u.x][u.y]={frame:f,layer:y,x:u.x,y:u.y,r:s.r,g:s.g,b:s.b,a:s.a},g=function(r,a){var t,n=[];return(t={x:r.x,y:r.y-1}).y>=a.top&&n.push(t),(t={x:r.x+1,y:r.y}).x<=a.right&&n.push(t),(t={x:r.x,y:r.y+1}).y<=a.bottom&&n.push(t),(t={x:r.x-1,y:r.y}).x>=a.left&&n.push(t),n}(u,i),g.forEach((function(r){l[a(r)]||o[a(r)]||(n.push(r),o[a(r)]=!0)}),this))}),m),h=n.slice(0)},m=this;h.length>0;)p();self.postMessage(e)}})();