(()=>{function r(r,a){return r[a.x]&&r[a.x][a.y]||!1}function a(r){return r.x+":"+r.y}self.onmessage=function(n){var t={},x=n.data,y=x.point,e=x.pixels,o=x.fillColor,f=x.layer,s=x.layerZ,u=x.frame,g=x.bounds,i=r(e,y);i||(i={frame:u,layer:f,x:y.x,y:y.y,r:0,g:0,b:0,a:0});for(var l={r:i.r,g:i.g,b:i.b,a:i.a},b={},h=[i],c=function(){var n=[],x={};h.forEach((function(y){b[a(y)]=!0;var i,h,c,p=r(e,y);(h=p?{r:p.r,g:p.g,b:p.b,a:p.a}:{r:0,g:0,b:0,a:0}).r===(c=l).r&&h.g===c.g&&h.b===c.b&&h.a===c.a&&(t[y.x]||(t[y.x]={}),t[y.x][y.y]={frame:u,layer:f,x:y.x,y:y.y,z:s,r:o.r,g:o.g,b:o.b,a:o.a},i=function(r,a){var n,t=[];return(n={x:r.x,y:r.y-1}).y>=a.top&&t.push(n),(n={x:r.x+1,y:r.y}).x<=a.right&&t.push(n),(n={x:r.x,y:r.y+1}).y<=a.bottom&&t.push(n),(n={x:r.x-1,y:r.y}).x>=a.left&&t.push(n),t}(y,g),i.forEach((function(r){b[a(r)]||x[a(r)]||(n.push(r),x[a(r)]=!0)}),this))}),p),h=n.slice(0)},p=this;h.length>0;)c();self.postMessage(t)}})();