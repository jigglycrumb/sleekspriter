self.onmessage=function(a){var e,s=a.data,r=s.frameSize,f=s.imageData,m=s.state,t=s.imageDimensions,i={size:[r.width,r.height],frames:[m.frames.x,m.frames.y],layers:[],animations:[],pixels:[]},n=m.frames.x*m.frames.y;for(e=1;e<=n;e++)i.layers.push([e,e,"Layer ".concat(e),0,100,1]);var x=1,y={canvas:{x:1,y:1},frame:{x:1,y:1}};for(e=0;e<f.data.length;e+=4){var h=f.data[e],v=f.data[e+1],o=f.data[e+2],c=(f.data[e+3]/255).toFixed(2);if(c>0){var d=[x,y.frame.x,y.frame.y,h,v,o,c];i.pixels.push(d)}if(y.frame.x===r.width?(x++,y.frame.x=1):y.frame.x++,y.canvas.x===t.width){var l=Math.floor(y.canvas.y/(t.height/m.frames.y));x=1+m.frames.x*l,y.frame.x=1,y.canvas.y%(t.height/m.frames.y)==0?y.frame.y=1:y.frame.y++,y.canvas.x=1,y.canvas.y++}else y.canvas.x++}self.postMessage(i)};