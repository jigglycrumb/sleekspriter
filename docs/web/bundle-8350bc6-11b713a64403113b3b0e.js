(()=>{"use strict";self.onmessage=function(a){var e,s=a.data,r=s.frameSize,f=s.imageData,t=s.state,m=s.imageDimensions,i={size:[r.width,r.height],frames:[t.frames.x,t.frames.y],layers:[],pixels:[]},x=t.frames.x*t.frames.y;for(e=1;e<=x;e++)i.layers.push([e,e,"Layer ".concat(e),0,100,1]);var y=1,n={canvas:{x:1,y:1},frame:{x:1,y:1}};for(e=0;e<f.data.length;e+=4){var h=f.data[e],v=f.data[e+1],c=f.data[e+2];if(parseFloat((f.data[e+3]/255).toFixed(2))>0){var o=[y,n.frame.x,n.frame.y,h,v,c];i.pixels.push(o)}if(n.frame.x===r.width?(y++,n.frame.x=1):n.frame.x++,n.canvas.x===m.width){var d=Math.floor(n.canvas.y/(m.height/t.frames.y));y=1+t.frames.x*d,n.frame.x=1,n.canvas.y%(m.height/t.frames.y)==0?n.frame.y=1:n.frame.y++,n.canvas.x=1,n.canvas.y++}else n.canvas.x++}self.postMessage(i)}})();